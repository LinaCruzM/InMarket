<app-toolbar></app-toolbar>
<div class="container-box">
    <main class="table" id="customers_table">
      <section class="table-header">
          <h1>Áreas</h1>
              <button class="add-btn" (click)="openModal()"><i class="bi bi-plus-circle"></i>Agregar</button>
      </section>
      <section class="table-body">
          <table>
              <thead>
                <tr>
                    <th>Nombre del área</th>
                    <th>Presupuesto límite</th>
                    <th></th>
                    <th></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let area of areas">
                    <td>{{ area.are_name }}</td>
                    <td>{{ area.are_limit | currency }}</td>
                    <td>
                      <button (click)="editArea(area)" class="edit-btn"><i class="bi bi-pencil-square"></i></button>
                    </td>
                    <td>
                      <button (click)="openDeleteConfirmModal(area)" class="delete-btn"><i class="bi bi-trash3-fill"></i></button>
                    </td>
                  </tr>
              </tbody>
          </table>
      </section>
  </main>
  </div>
<!-- Modal para agregar/editar área -->
<div class="modal" [ngClass]="{'show': showModal}" (click)="closeModal()">
  <div class="modal-content large" (click)="$event.stopPropagation()">
    <h2>{{ isEditMode ? 'Editar Área' : 'Agregar Área' }}</h2>
    <form #areaForm="ngForm" (ngSubmit)="onSubmitForm()">
      
      <div class="modal-div">
        <label for="are_name">Nombre del Área:</label>
        <input type="text" id="are_name" [(ngModel)]="currentArea.are_name" name="are_name" required>
      </div>
      
      <div class="modal-div">
        <label for="are_limit">Presupuesto límite:</label>
        <input type="number" id="are_limit" [(ngModel)]="currentArea.are_limit" name="are_limit" required>
      </div>

      <div class="modal-btn">
        <button class="btn" type="submit" [disabled]="areaForm.invalid">
          <i class="bi bi-plus-circle"></i>{{ isEditMode ? 'Actualizar' : 'Crear' }}
        </button>
        <button class="btn" (click)="closeModal()" type="button">
          <i class="bi bi-x-circle"></i>Cerrar
        </button>
      </div>
    </form>
  </div>  
</div>
<!-- Modal para confirmación de eliminación -->
<div class="modal" [ngClass]="{'show': showDeleteConfirmModal}" (click)="closeDeleteConfirmModal()">
  <div class="modal-content small" (click)="$event.stopPropagation()">
    <h2>Eliminar Área</h2>
    <div class="modal-delete">
      <p>¿Estás seguro/a de que deseas eliminar esta área? No podrás deshacer esta acción.</p>
      <div class="modal-btn">
        <button class="btn" (click)="confirmDelete()" type="button">Eliminar</button>
        <button class="btn" (click)="closeDeleteConfirmModal()" type="button">Cancelar</button>
      </div>
    </div>
  </div>
</div>


  