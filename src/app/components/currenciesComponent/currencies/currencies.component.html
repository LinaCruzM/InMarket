<div class="container-box">
  <main class="table" id="customers_table">
    <section class="table-header">
        <h1>Divisas</h1>
        <button class="add-btn" (click)="openModal()"><i class="bi bi-plus-circle"></i>Agregar</button>
    </section>
    <section class="table-body">
        <table>
            <thead>
              <tr>
                  <th>Nombre de la Divisa</th>
                  <th></th>
                  <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let currency of currencies">
                  <td>{{ currency.cur_name }}</td>
                  <td>
                    <button class="edit-btn" (click)="editCurrency(currency.cur_id)">
                      <i class="bi bi-pencil-square"></i>
                    </button>
                  </td>
                  <td>
                    <button class="delete-btn" (click)="confirmDeleteCurrency(currency.cur_id)">
                      <i class="bi bi-trash3-fill"></i>
                    </button>
                  </td>
              </tr>
            </tbody>
        </table>
    </section>
</main>
</div>

<!-- Modal para agregar/editar divisa -->
<div class="modal" [ngClass]="{'show': showModal}" (click)="closeModal()">
  <div class="modal-content large" (click)="$event.stopPropagation()">
    <h2>{{ isEditMode ? 'Editar Divisa' : 'Agregar Divisa' }}</h2>
    <form #currencyForm="ngForm" (ngSubmit)="onSubmitForm()">
      <div class="modal-div">
        <label for="cur_name">Nombre de la divisa:</label>
        <input type="text" id="cur_name" [(ngModel)]="currentCurrency.cur_name" name="cur_name" required>
      </div>

      <div class="modal-btn">
        <button class="btn" type="submit" [disabled]="currencyForm.invalid">
          <i class="bi bi-plus-circle"></i>{{ isEditMode ? 'Actualizar' : 'Crear' }}
        </button>
        <button class="btn" (click)="closeModal()" type="button">
          <i class="bi bi-x-circle"></i>Cerrar
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modal para confirmación de eliminación -->
<div class="modal" [ngClass]="{'show': showDeleteModal}" (click)="closeDeleteModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>Eliminar Divisa</h2>
    <div class="modal-delete">
      <p>¿Estás seguro/a de que deseas eliminar esta divisa? No podrás deshacer esta acción.</p>
      <div class="modal-btn">
        <button class="btn" (click)="currencyToDelete !== null ? deleteCurrency(currencyToDelete) : null" type="button">Eliminar</button>
        <button class="btn" (click)="closeDeleteModal()" type="button">Cancelar</button>
      </div>
    </div>
  </div>
</div>

